{"ast":null,"code":"var _jsxFileName = \"/app/frontend/src/components/ContentStudio.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Button } from './ui/button';\nimport { Card, CardContent } from './ui/card';\nimport { Textarea } from './ui/textarea';\nimport { Badge } from './ui/badge';\nimport { Avatar, AvatarFallback } from './ui/avatar';\nimport { Input } from './ui/input';\nimport { Sparkles, Upload, X, Send, Video, CheckCircle, XCircle, Film, Loader2, User, Clock, ChevronLeft, FolderOpen, Clapperboard, Download, Settings, Edit2, Trash2, Save, Plus, GripVertical } from 'lucide-react';\nimport { toast } from 'sonner';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { UserMenu } from './UserMenu';\nimport { sendDirectorMessage, getDirectorProject, uploadDirectorSegment, assembleProjectVideo, getAssemblyStatus, downloadAssembledVideo, updateShot, addShot, deleteShot, reorderShots } from '../utils/api';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"./ui/dialog\";\nimport { Label } from \"./ui/label\";\nimport { Switch } from \"./ui/switch\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"./ui/select\";\nimport { Progress } from \"./ui/progress\";\nimport { DndContext, closestCenter, KeyboardSensor, PointerSensor, useSensor, useSensors } from '@dnd-kit/core';\nimport { arrayMove, SortableContext, sortableKeyboardCoordinates, useSortable, verticalListSortingStrategy } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\n\n// Sortable Shot Card Component\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SortableShotCard = ({\n  shot,\n  index,\n  projectId,\n  onUpdate,\n  onDelete,\n  uploadingSegment,\n  handleSegmentUpload,\n  handleFeedback\n}) => {\n  _s();\n  const [isEditing, setIsEditing] = useState(false);\n  const [editData, setEditData] = useState({\n    segment_name: shot.segment_name,\n    script: shot.script,\n    visual_guide: shot.visual_guide,\n    duration: shot.duration\n  });\n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    transform,\n    transition,\n    isDragging\n  } = useSortable({\n    id: shot.segment_name + index\n  });\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n    opacity: isDragging ? 0.5 : 1\n  };\n  const handleSave = async () => {\n    try {\n      const result = await updateShot(projectId, index, editData);\n      if (result.success) {\n        onUpdate(result.shot_list);\n        setIsEditing(false);\n        toast.success('Shot updated successfully!');\n      }\n    } catch (error) {\n      console.error('Error updating shot:', error);\n      toast.error('Failed to update shot');\n    }\n  };\n  const handleCancel = () => {\n    setEditData({\n      segment_name: shot.segment_name,\n      script: shot.script,\n      visual_guide: shot.visual_guide,\n      duration: shot.duration\n    });\n    setIsEditing(false);\n  };\n  const handleDeleteClick = async () => {\n    console.log('Delete button clicked for shot:', shot.segment_name, 'index:', index);\n    const confirmed = window.confirm(`Are you sure you want to delete \"${shot.segment_name.replace('_', ' ')}\"?`);\n    console.log('User confirmation:', confirmed);\n    if (confirmed) {\n      try {\n        console.log('Calling deleteShot API with projectId:', projectId, 'index:', index);\n        const result = await deleteShot(projectId, index);\n        console.log('Delete API response:', result);\n        if (result.success) {\n          onDelete(result.shot_list);\n          toast.success('Shot deleted successfully!');\n        } else {\n          toast.error('Failed to delete shot');\n        }\n      } catch (error) {\n        console.error('Error deleting shot:', error);\n        toast.error(`Failed to delete shot: ${error.message}`);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Card, {\n    ref: setNodeRef,\n    style: style,\n    className: `transition-all ${shot.uploaded ? 'bg-green-50 border-green-200 dark:bg-green-950/20 dark:border-green-800' : 'bg-card border-border hover:border-primary/50'}`,\n    children: /*#__PURE__*/_jsxDEV(CardContent, {\n      className: \"pt-4 pb-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-start justify-between gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2 flex-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              ...attributes,\n              ...listeners,\n              className: \"cursor-grab active:cursor-grabbing\",\n              children: /*#__PURE__*/_jsxDEV(GripVertical, {\n                className: \"w-4 h-4 text-muted-foreground\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 15\n            }, this), shot.uploaded ? /*#__PURE__*/_jsxDEV(CheckCircle, {\n              className: \"w-5 h-5 text-green-600 flex-shrink-0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Clock, {\n              className: \"w-5 h-5 text-muted-foreground flex-shrink-0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1\",\n              children: [isEditing ? /*#__PURE__*/_jsxDEV(Input, {\n                value: editData.segment_name,\n                onChange: e => setEditData({\n                  ...editData,\n                  segment_name: e.target.value\n                }),\n                className: \"text-sm font-semibold mb-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-semibold text-sm text-foreground capitalize\",\n                children: shot.segment_name.replace('_', ' ')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2 mt-1 flex-wrap\",\n                children: [isEditing ? /*#__PURE__*/_jsxDEV(Input, {\n                  type: \"number\",\n                  value: editData.duration,\n                  onChange: e => setEditData({\n                    ...editData,\n                    duration: parseInt(e.target.value)\n                  }),\n                  className: \"w-16 h-6 text-xs\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(Badge, {\n                  variant: \"outline\",\n                  className: \"text-xs\",\n                  children: [shot.duration, \"s\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 21\n                }, this), shot.uploaded && !isEditing && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleFeedback(shot.segment_name),\n                  className: \"text-xs text-primary hover:underline font-semibold\",\n                  children: \"Get Feedback\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-1\",\n            children: isEditing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                size: \"sm\",\n                variant: \"ghost\",\n                onClick: handleSave,\n                className: \"h-8 w-8 p-0\",\n                children: /*#__PURE__*/_jsxDEV(Save, {\n                  className: \"w-4 h-4 text-green-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                size: \"sm\",\n                variant: \"ghost\",\n                onClick: handleCancel,\n                className: \"h-8 w-8 p-0\",\n                children: /*#__PURE__*/_jsxDEV(X, {\n                  className: \"w-4 h-4 text-red-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                size: \"sm\",\n                variant: \"ghost\",\n                onClick: () => setIsEditing(true),\n                className: \"h-8 w-8 p-0\",\n                children: /*#__PURE__*/_jsxDEV(Edit2, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                type: \"button\",\n                size: \"sm\",\n                variant: \"ghost\",\n                onClick: e => {\n                  e.stopPropagation();\n                  handleDeleteClick();\n                },\n                className: \"h-8 w-8 p-0\",\n                children: /*#__PURE__*/_jsxDEV(Trash2, {\n                  className: \"w-4 h-4 text-red-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2 text-xs\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              className: \"text-foreground\",\n              children: \"Script:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 15\n            }, this), isEditing ? /*#__PURE__*/_jsxDEV(Textarea, {\n              value: editData.script,\n              onChange: e => setEditData({\n                ...editData,\n                script: e.target.value\n              }),\n              className: \"mt-1 text-xs min-h-[60px]\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-muted-foreground mt-1\",\n              children: shot.script\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              className: \"text-foreground\",\n              children: \"Visual Guide:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 15\n            }, this), isEditing ? /*#__PURE__*/_jsxDEV(Textarea, {\n              value: editData.visual_guide,\n              onChange: e => setEditData({\n                ...editData,\n                visual_guide: e.target.value\n              }),\n              className: \"mt-1 text-xs min-h-[60px]\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-muted-foreground mt-1\",\n              children: shot.visual_guide\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this), !shot.uploaded && !isEditing && /*#__PURE__*/_jsxDEV(Button, {\n          size: \"sm\",\n          onClick: () => {\n            const input = document.createElement('input');\n            input.type = 'file';\n            input.accept = 'video/*';\n            input.onchange = e => {\n              const file = e.target.files[0];\n              if (file) handleSegmentUpload(shot, file);\n            };\n            input.click();\n          },\n          disabled: uploadingSegment === shot.segment_name,\n          className: \"w-full\",\n          variant: \"outline\",\n          children: uploadingSegment === shot.segment_name ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Loader2, {\n              className: \"w-4 h-4 mr-2 animate-spin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 19\n            }, this), \"Uploading...\"]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Upload, {\n              className: \"w-4 h-4 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 19\n            }, this), \"Upload Footage\"]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 5\n  }, this);\n};\n\n// Function to convert markdown to plain text\n_s(SortableShotCard, \"J0C7EobKHaVkA73L/zJ10eC7Pz0=\", false, function () {\n  return [useSortable];\n});\n_c = SortableShotCard;\nconst markdownToPlainText = text => {\n  if (!text) return '';\n  return text\n  // Remove headers (###, ##, #)\n  .replace(/^#{1,6}\\s+/gm, '')\n  // Remove bold (**text** or __text__)\n  .replace(/(\\*\\*|__)(.*?)\\1/g, '$2')\n  // Remove italic (*text* or _text_)\n  .replace(/(\\*|_)(.*?)\\1/g, '$2')\n  // Remove strikethrough (~~text~~)\n  .replace(/~~(.*?)~~/g, '$1')\n  // Remove inline code (`code`)\n  .replace(/`([^`]+)`/g, '$1')\n  // Remove code blocks (```code```)\n  .replace(/```[\\s\\S]*?```/g, '')\n  // Remove links [text](url)\n  .replace(/\\[([^\\]]+)\\]\\([^)]+\\)/g, '$1')\n  // Remove images ![alt](url)\n  .replace(/!\\[([^\\]]*)\\]\\([^)]+\\)/g, '$1')\n  // Remove horizontal rules (---, ___, ***)\n  .replace(/^[\\*\\-_]{3,}\\s*$/gm, '')\n  // Remove blockquotes (>)\n  .replace(/^>\\s+/gm, '')\n  // Remove list markers (-, *, +, 1.)\n  .replace(/^\\s*[-\\*\\+]\\s+/gm, 'â€¢ ').replace(/^\\s*\\d+\\.\\s+/gm, '')\n  // Remove extra whitespace\n  .replace(/\\n{3,}/g, '\\n\\n').trim();\n};\n\n// Function to extract clean user goal without research context\nconst extractCleanUserGoal = userGoal => {\n  if (!userGoal) return '';\n\n  // Split by research context marker and return only the first part\n  const parts = userGoal.split(/\\[Research Context for AI Director\\]:/i);\n  return parts[0].trim();\n};\nexport const ContentStudio = () => {\n  _s2();\n  const navigate = useNavigate();\n  const {\n    projectId\n  } = useParams();\n  const [project, setProject] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [inputValue, setInputValue] = useState('');\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [shotList, setShotList] = useState([]);\n  const [matchedFormat, setMatchedFormat] = useState(null);\n  const [uploadingSegment, setUploadingSegment] = useState(null);\n  const [showAddShot, setShowAddShot] = useState(false);\n  const [newShotData, setNewShotData] = useState({\n    segment_name: '',\n    script: '',\n    visual_guide: '',\n    duration: 15\n  });\n\n  // Assembly state\n  const [showAssemblyDialog, setShowAssemblyDialog] = useState(false);\n  const [isAssembling, setIsAssembling] = useState(false);\n  const [assemblyId, setAssemblyId] = useState(null);\n  const [assemblyProgress, setAssemblyProgress] = useState(0);\n  const [assemblyStatus, setAssemblyStatus] = useState(null);\n  const [assemblyOptions, setAssemblyOptions] = useState({\n    add_transitions: true,\n    transition_type: 'fade',\n    transition_duration: 0.8,\n    add_subtitles: true,\n    subtitle_position: 'bottom',\n    subtitle_font_size: 48,\n    optimize_platform: 'youtube'\n  });\n  const textareaRef = useRef(null);\n  const messagesEndRef = useRef(null);\n  const fileInputRef = useRef(null);\n\n  // Drag and drop sensors\n  const sensors = useSensors(useSensor(PointerSensor), useSensor(KeyboardSensor, {\n    coordinateGetter: sortableKeyboardCoordinates\n  }));\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // Load project on mount\n  useEffect(() => {\n    loadProject();\n  }, [projectId]);\n  const loadProject = async () => {\n    try {\n      const projectData = await getDirectorProject(projectId);\n      setProject(projectData);\n      if (projectData.shot_list) {\n        setShotList(projectData.shot_list);\n      }\n      if (projectData.matched_format) {\n        setMatchedFormat(projectData.matched_format);\n      }\n\n      // Initialize messages with brief summary\n      const shotCount = projectData.shot_list ? projectData.shot_list.length : 0;\n      const formatName = projectData.matched_format ? projectData.matched_format.name : 'a viral format';\n      const platform = projectData.target_platform || 'your platform';\n      const summary = `You're creating content for ${platform} using the \"${formatName}\" format with ${shotCount} shots to film.`;\n      setMessages([{\n        role: 'assistant',\n        content: `I've created your shot list based on the best viral format for your content. ${summary} Ready to start recording?`,\n        timestamp: new Date()\n      }]);\n    } catch (error) {\n      console.error('Error loading project:', error);\n      toast.error('Failed to load project');\n    }\n  };\n  const handleSendMessage = async () => {\n    if (!inputValue.trim()) return;\n    setIsProcessing(true);\n    const userMessage = {\n      role: 'user',\n      content: inputValue.trim(),\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setInputValue('');\n    try {\n      const result = await sendDirectorMessage(projectId, userMessage.content);\n      const aiMessage = {\n        role: 'assistant',\n        content: result.message,\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, aiMessage]);\n\n      // Update state from result\n      if (result.shot_list) {\n        setShotList(result.shot_list);\n      }\n      if (result.matched_format) {\n        setMatchedFormat(result.matched_format);\n      }\n    } catch (error) {\n      console.error('Director error:', error);\n      toast.error('Failed to send message');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n  const handleKeyDown = e => {\n    if (e.key === 'Enter' && (e.metaKey || e.ctrlKey)) {\n      handleSendMessage();\n    }\n  };\n  const handleSegmentUpload = async (segment, file) => {\n    if (!file.type.startsWith('video/')) {\n      toast.error('Please upload a video file');\n      return;\n    }\n    setUploadingSegment(segment.segment_name);\n    try {\n      await uploadDirectorSegment(projectId, segment.segment_name, file);\n      toast.success(`${segment.segment_name} uploaded successfully!`);\n\n      // Update shot list\n      setShotList(prev => prev.map(s => s.segment_name === segment.segment_name ? {\n        ...s,\n        uploaded: true\n      } : s));\n\n      // Reload project to get latest state\n      await loadProject();\n    } catch (error) {\n      console.error('Upload error:', error);\n      toast.error('Failed to upload segment');\n    } finally {\n      setUploadingSegment(null);\n    }\n  };\n  const allSegmentsUploaded = () => {\n    return shotList.length > 0 && shotList.every(shot => shot.uploaded);\n  };\n  const handleStartAssembly = async () => {\n    setIsAssembling(true);\n    setAssemblyProgress(0);\n    try {\n      const result = await assembleProjectVideo(projectId, assemblyOptions);\n      setAssemblyId(result.assembly_id);\n      setAssemblyStatus('processing');\n      toast.success('Video assembly started!');\n\n      // Start polling for status\n      pollAssemblyStatus(result.assembly_id);\n    } catch (error) {\n      console.error('Assembly error:', error);\n      toast.error('Failed to start video assembly');\n      setIsAssembling(false);\n    }\n  };\n  const pollAssemblyStatus = async id => {\n    const checkStatus = async () => {\n      try {\n        const status = await getAssemblyStatus(id);\n        setAssemblyProgress(status.progress);\n        setAssemblyStatus(status.status);\n        if (status.status === 'completed') {\n          setIsAssembling(false);\n          toast.success('Video assembly complete! Ready to download.');\n        } else if (status.status === 'failed') {\n          setIsAssembling(false);\n          toast.error(`Assembly failed: ${status.error || 'Unknown error'}`);\n        } else {\n          // Continue polling\n          setTimeout(() => checkStatus(), 2000);\n        }\n      } catch (error) {\n        console.error('Status check error:', error);\n        setIsAssembling(false);\n        toast.error('Failed to check assembly status');\n      }\n    };\n    checkStatus();\n  };\n  const handleDownloadVideo = async () => {\n    try {\n      await downloadAssembledVideo(assemblyId);\n      toast.success('Video download started!');\n    } catch (error) {\n      console.error('Download error:', error);\n      toast.error('Failed to download video');\n    }\n  };\n  const handleDragEnd = async event => {\n    const {\n      active,\n      over\n    } = event;\n    if (active.id !== over.id) {\n      const oldIndex = shotList.findIndex((shot, idx) => shot.segment_name + idx === active.id);\n      const newIndex = shotList.findIndex((shot, idx) => shot.segment_name + idx === over.id);\n      const newShotList = arrayMove(shotList, oldIndex, newIndex);\n      setShotList(newShotList);\n      try {\n        await reorderShots(projectId, newShotList);\n        toast.success('Shot list reordered!');\n      } catch (error) {\n        console.error('Error reordering shots:', error);\n        toast.error('Failed to reorder shots');\n        setShotList(shotList); // Revert on error\n      }\n    }\n  };\n  const handleAddShot = async () => {\n    if (!newShotData.segment_name.trim() || !newShotData.script.trim()) {\n      toast.error('Please fill in shot name and script');\n      return;\n    }\n    try {\n      const result = await addShot(projectId, newShotData);\n      if (result.success) {\n        setShotList(result.shot_list);\n        setShowAddShot(false);\n        setNewShotData({\n          segment_name: '',\n          script: '',\n          visual_guide: '',\n          duration: 15\n        });\n        toast.success('Shot added successfully!');\n      }\n    } catch (error) {\n      console.error('Error adding shot:', error);\n      toast.error('Failed to add shot');\n    }\n  };\n  const handleFeedback = async segmentName => {\n    const msg = `Can you give me feedback on the ${segmentName.replace('_', ' ')} shot?`;\n    setInputValue(msg);\n    setIsProcessing(true);\n    const userMessage = {\n      role: 'user',\n      content: msg,\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setInputValue('');\n    try {\n      const result = await sendDirectorMessage(projectId, msg);\n      const aiMessage = {\n        role: 'assistant',\n        content: result.message,\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, aiMessage]);\n      if (result.shot_list) setShotList(result.shot_list);\n    } catch (error) {\n      console.error('Error:', error);\n      toast.error('Failed to get feedback');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-sky\",\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"border-b border-border/50 bg-background/80 backdrop-blur-md sticky top-0 z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-full px-4 sm:px-6 lg:px-8\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center h-16\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"ghost\",\n              size: \"sm\",\n              onClick: () => navigate('/director'),\n              className: \"gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(ChevronLeft, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 663,\n                columnNumber: 17\n              }, this), \"Back to Home\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 657,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-6 w-px bg-border\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 666,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Badge, {\n              className: \"bg-primary/20 text-primary border-primary/30 font-sans animate-pulse\",\n              children: [/*#__PURE__*/_jsxDEV(Film, {\n                className: \"w-3 h-3 mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 668,\n                columnNumber: 17\n              }, this), \"Content Studio\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 667,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 656,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline\",\n              size: \"sm\",\n              onClick: () => navigate('/director/projects'),\n              className: \"gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(FolderOpen, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 679,\n                columnNumber: 17\n              }, this), \"All Projects\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 673,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(UserMenu, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 682,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 672,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 655,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 654,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 653,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex h-[calc(100vh-4rem)]\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-1/3 border-r border-border/50 bg-background/50 backdrop-blur-sm overflow-y-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 space-y-6\",\n          children: [project && /*#__PURE__*/_jsxDEV(Card, {\n            className: \"border-primary/30 bg-primary/5\",\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              className: \"pt-4 pb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-sm font-semibold text-muted-foreground mb-2\",\n                children: \"Project Goal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 699,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-foreground\",\n                children: extractCleanUserGoal(project.user_goal)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 700,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 698,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 697,\n            columnNumber: 15\n          }, this), matchedFormat && /*#__PURE__*/_jsxDEV(Card, {\n            className: \"border-accent/30 bg-accent/5\",\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              className: \"pt-4 pb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2 mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(Sparkles, {\n                  className: \"w-4 h-4 text-accent-foreground\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 710,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-sm font-semibold text-foreground\",\n                  children: \"Matched Format\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 711,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 709,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm font-semibold text-foreground mb-1\",\n                children: matchedFormat.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 713,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-muted-foreground\",\n                children: matchedFormat.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 714,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 708,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 707,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-semibold text-foreground\",\n                children: \"Shot List\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 722,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Badge, {\n                  variant: \"outline\",\n                  className: \"text-xs\",\n                  children: [shotList.filter(s => s.uploaded).length, \" / \", shotList.length]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 724,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"sm\",\n                  onClick: () => setShowAddShot(true),\n                  className: \"gap-1 h-7\",\n                  children: [/*#__PURE__*/_jsxDEV(Plus, {\n                    className: \"w-4 h-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 732,\n                    columnNumber: 21\n                  }, this), \"Add Shot\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 727,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 723,\n                columnNumber: 17\n              }, this), allSegmentsUploaded() && /*#__PURE__*/_jsxDEV(Card, {\n                className: \"border-green-200 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 dark:border-green-800\",\n                children: /*#__PURE__*/_jsxDEV(CardContent, {\n                  className: \"pt-6 pb-6\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"space-y-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center gap-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center\",\n                        children: /*#__PURE__*/_jsxDEV(CheckCircle, {\n                          className: \"w-6 h-6 text-white\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 744,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 743,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                          className: \"font-semibold text-foreground\",\n                          children: \"All Shots Complete!\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 747,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"text-xs text-muted-foreground\",\n                          children: \"Ready to assemble your final video\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 748,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 746,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 742,\n                      columnNumber: 25\n                    }, this), !isAssembling && !assemblyId && /*#__PURE__*/_jsxDEV(Button, {\n                      onClick: () => setShowAssemblyDialog(true),\n                      className: \"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-semibold\",\n                      size: \"lg\",\n                      children: [/*#__PURE__*/_jsxDEV(Clapperboard, {\n                        className: \"w-5 h-5 mr-2\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 758,\n                        columnNumber: 29\n                      }, this), \"Generate Final Video\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 753,\n                      columnNumber: 27\n                    }, this), isAssembling && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"space-y-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-center justify-between text-sm\",\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"text-muted-foreground\",\n                          children: \"Assembling video...\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 766,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"font-semibold text-foreground\",\n                          children: [assemblyProgress, \"%\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 767,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 765,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(Progress, {\n                        value: assemblyProgress,\n                        className: \"h-2\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 769,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-xs text-muted-foreground\",\n                        children: [assemblyProgress < 30 && \"Processing segments...\", assemblyProgress >= 30 && assemblyProgress < 60 && \"Adding transitions...\", assemblyProgress >= 60 && assemblyProgress < 90 && \"Optimizing video...\", assemblyProgress >= 90 && \"Finalizing...\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 770,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 764,\n                      columnNumber: 27\n                    }, this), assemblyStatus === 'completed' && assemblyId && /*#__PURE__*/_jsxDEV(Button, {\n                      onClick: handleDownloadVideo,\n                      className: \"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold\",\n                      size: \"lg\",\n                      children: [/*#__PURE__*/_jsxDEV(Download, {\n                        className: \"w-5 h-5 mr-2\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 785,\n                        columnNumber: 29\n                      }, this), \"Download Final Video\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 780,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 741,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 740,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 739,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 721,\n              columnNumber: 15\n            }, this), showAddShot && /*#__PURE__*/_jsxDEV(Card, {\n              className: \"border-primary/30 bg-primary/5\",\n              children: /*#__PURE__*/_jsxDEV(CardContent, {\n                className: \"pt-4 pb-4 space-y-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"font-semibold text-sm\",\n                  children: \"Add New Shot\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 799,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"space-y-2\",\n                  children: [/*#__PURE__*/_jsxDEV(Input, {\n                    placeholder: \"Shot name (e.g., hook, demo)\",\n                    value: newShotData.segment_name,\n                    onChange: e => setNewShotData({\n                      ...newShotData,\n                      segment_name: e.target.value\n                    }),\n                    className: \"text-sm\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 801,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n                    placeholder: \"Script for this shot\",\n                    value: newShotData.script,\n                    onChange: e => setNewShotData({\n                      ...newShotData,\n                      script: e.target.value\n                    }),\n                    className: \"text-sm min-h-[60px]\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 807,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n                    placeholder: \"Visual guide (how to film)\",\n                    value: newShotData.visual_guide,\n                    onChange: e => setNewShotData({\n                      ...newShotData,\n                      visual_guide: e.target.value\n                    }),\n                    className: \"text-sm min-h-[60px]\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 813,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center gap-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"text-xs text-muted-foreground\",\n                      children: \"Duration (seconds):\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 820,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Input, {\n                      type: \"number\",\n                      value: newShotData.duration,\n                      onChange: e => setNewShotData({\n                        ...newShotData,\n                        duration: parseInt(e.target.value)\n                      }),\n                      className: \"w-20 h-8 text-sm\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 821,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 819,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 800,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-2\",\n                  children: [/*#__PURE__*/_jsxDEV(Button, {\n                    size: \"sm\",\n                    onClick: handleAddShot,\n                    className: \"flex-1\",\n                    children: [/*#__PURE__*/_jsxDEV(Plus, {\n                      className: \"w-4 h-4 mr-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 831,\n                      columnNumber: 25\n                    }, this), \"Add Shot\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 830,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    size: \"sm\",\n                    variant: \"outline\",\n                    onClick: () => {\n                      setShowAddShot(false);\n                      setNewShotData({\n                        segment_name: '',\n                        script: '',\n                        visual_guide: '',\n                        duration: 15\n                      });\n                    },\n                    className: \"flex-1\",\n                    children: \"Cancel\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 834,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 829,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 798,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 797,\n              columnNumber: 17\n            }, this), shotList.length > 0 && /*#__PURE__*/_jsxDEV(DndContext, {\n              sensors: sensors,\n              collisionDetection: closestCenter,\n              onDragEnd: handleDragEnd,\n              children: /*#__PURE__*/_jsxDEV(SortableContext, {\n                items: shotList.map((shot, idx) => shot.segment_name + idx),\n                strategy: verticalListSortingStrategy,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"space-y-3\",\n                  children: shotList.map((shot, index) => /*#__PURE__*/_jsxDEV(SortableShotCard, {\n                    shot: shot,\n                    index: index,\n                    projectId: projectId,\n                    onUpdate: setShotList,\n                    onDelete: setShotList,\n                    uploadingSegment: uploadingSegment,\n                    handleSegmentUpload: handleSegmentUpload,\n                    handleFeedback: handleFeedback\n                  }, shot.segment_name + index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 868,\n                    columnNumber: 25\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 866,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 862,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 857,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 720,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 693,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 692,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 overflow-y-auto p-6 space-y-4\",\n          children: [messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex gap-3 ${message.role === 'user' ? 'justify-end' : 'justify-start'}`,\n            children: [message.role === 'assistant' && /*#__PURE__*/_jsxDEV(Avatar, {\n              className: \"w-10 h-10 border-2 border-primary/20 flex-shrink-0\",\n              children: /*#__PURE__*/_jsxDEV(AvatarFallback, {\n                className: \"bg-gradient-primary text-primary-foreground\",\n                children: /*#__PURE__*/_jsxDEV(Sparkles, {\n                  className: \"w-5 h-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 897,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 896,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 895,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `flex-1 max-w-2xl ${message.role === 'user' ? 'flex flex-col items-end' : ''}`,\n              children: [/*#__PURE__*/_jsxDEV(Card, {\n                className: `${message.role === 'user' ? 'bg-primary text-primary-foreground border-primary' : 'bg-card/95 backdrop-blur-sm border-border/50'} shadow-lg`,\n                children: /*#__PURE__*/_jsxDEV(CardContent, {\n                  className: \"pt-4 pb-4\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-sm leading-relaxed whitespace-pre-wrap font-sans\",\n                    children: message.role === 'assistant' ? markdownToPlainText(message.content) : message.content\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 909,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 908,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 903,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-muted-foreground mt-1.5 font-sans\",\n                children: message.timestamp.toLocaleTimeString([], {\n                  hour: '2-digit',\n                  minute: '2-digit'\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 914,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 902,\n              columnNumber: 17\n            }, this), message.role === 'user' && /*#__PURE__*/_jsxDEV(Avatar, {\n              className: \"w-10 h-10 border-2 border-primary/20 flex-shrink-0\",\n              children: /*#__PURE__*/_jsxDEV(AvatarFallback, {\n                className: \"bg-muted text-muted-foreground\",\n                children: /*#__PURE__*/_jsxDEV(User, {\n                  className: \"w-5 h-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 922,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 921,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 920,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 893,\n            columnNumber: 15\n          }, this)), isProcessing && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-3 justify-start\",\n            children: [/*#__PURE__*/_jsxDEV(Avatar, {\n              className: \"w-10 h-10 border-2 border-primary/20\",\n              children: /*#__PURE__*/_jsxDEV(AvatarFallback, {\n                className: \"bg-gradient-primary text-primary-foreground\",\n                children: /*#__PURE__*/_jsxDEV(Sparkles, {\n                  className: \"w-5 h-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 933,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 932,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 931,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Card, {\n              className: \"bg-card/95 backdrop-blur-sm border-border/50 shadow-lg\",\n              children: /*#__PURE__*/_jsxDEV(CardContent, {\n                className: \"pt-4 pb-4\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex gap-1\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-2 h-2 rounded-full bg-primary animate-bounce\",\n                      style: {\n                        animationDelay: '0s'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 940,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-2 h-2 rounded-full bg-primary animate-bounce\",\n                      style: {\n                        animationDelay: '0.2s'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 941,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-2 h-2 rounded-full bg-primary animate-bounce\",\n                      style: {\n                        animationDelay: '0.4s'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 942,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 939,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm text-muted-foreground font-sans\",\n                    children: \"Thinking...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 944,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 938,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 937,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 936,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 930,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: messagesEndRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 950,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 891,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-t border-border/50 bg-background/80 backdrop-blur-sm p-6\",\n          children: [shotList.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-wrap gap-2 mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline\",\n              size: \"sm\",\n              onClick: () => {\n                var _textareaRef$current;\n                setInputValue(\"Please provide a comprehensive project status. Include: 1) Overall creative vision and format we're using, 2) Complete shot list with what's been filmed and what's remaining, 3) Quality assessment of uploaded shots so far, 4) Any creative adjustments or suggestions based on progress, 5) Estimated completion percentage and next steps.\");\n                (_textareaRef$current = textareaRef.current) === null || _textareaRef$current === void 0 ? void 0 : _textareaRef$current.focus();\n              },\n              className: \"text-xs\",\n              children: \"\\uD83D\\uDCCA Project Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 958,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline\",\n              size: \"sm\",\n              onClick: () => {\n                var _textareaRef$current2;\n                setInputValue(\"Please explain the next shot I need to record. Include: 1) Which shot it is in the sequence, 2) What the script and visual guide are for this shot, 3) Any specific tips or techniques for filming this shot effectively, 4) How this shot fits into the overall narrative. Do I have any questions before I start filming?\");\n                (_textareaRef$current2 = textareaRef.current) === null || _textareaRef$current2 === void 0 ? void 0 : _textareaRef$current2.focus();\n              },\n              className: \"text-xs\",\n              children: \"\\uD83C\\uDFA5 Next Shot\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 969,\n              columnNumber: 17\n            }, this), shotList.some(s => s.uploaded) && /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline\",\n              size: \"sm\",\n              onClick: () => {\n                var _textareaRef$current3;\n                setInputValue(\"Can you review all my uploaded shots?\");\n                (_textareaRef$current3 = textareaRef.current) === null || _textareaRef$current3 === void 0 ? void 0 : _textareaRef$current3.focus();\n              },\n              className: \"text-xs\",\n              children: \"\\u2728 Review Uploads\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 981,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 957,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Card, {\n            className: \"border-border/50 shadow-xl bg-card/95 backdrop-blur-sm\",\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              className: \"pt-4 pb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Textarea, {\n                  ref: textareaRef,\n                  value: inputValue,\n                  onChange: e => setInputValue(e.target.value),\n                  onKeyDown: handleKeyDown,\n                  placeholder: \"Ask me anything about your video or tell me you're ready to record...\",\n                  className: \"min-h-[80px] resize-none focus:ring-primary font-sans text-base\",\n                  disabled: isProcessing\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 999,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: handleSendMessage,\n                  disabled: isProcessing || !inputValue.trim(),\n                  className: \"bg-gradient-primary hover:shadow-glow self-end px-5 h-[80px] transition-all duration-300\",\n                  children: /*#__PURE__*/_jsxDEV(Send, {\n                    className: \"w-5 h-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1013,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1008,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 998,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-muted-foreground mt-2 font-sans\",\n                children: [\"Press \", /*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-muted rounded text-xs\",\n                  children: \"\\u2318 Enter\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1017,\n                  columnNumber: 25\n                }, this), \" to send\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1016,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 997,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 996,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 954,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 889,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 689,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: showAssemblyDialog,\n      onOpenChange: setShowAssemblyDialog,\n      children: /*#__PURE__*/_jsxDEV(DialogContent, {\n        className: \"sm:max-w-[600px]\",\n        children: [/*#__PURE__*/_jsxDEV(DialogHeader, {\n          children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n            className: \"flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(Settings, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1030,\n              columnNumber: 15\n            }, this), \"Configure Video Assembly\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1029,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(DialogDescription, {\n            children: \"Customize how your final video will be assembled. Add transitions, subtitles, and optimize for your target platform.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1033,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1028,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6 py-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(Label, {\n                  htmlFor: \"transitions\",\n                  className: \"text-base font-semibold\",\n                  children: \"Add Transitions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1044,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-muted-foreground\",\n                  children: \"Smooth transitions between shots\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1045,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1043,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Switch, {\n                id: \"transitions\",\n                checked: assemblyOptions.add_transitions,\n                onCheckedChange: checked => setAssemblyOptions(prev => ({\n                  ...prev,\n                  add_transitions: checked\n                }))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1047,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1042,\n              columnNumber: 15\n            }, this), assemblyOptions.add_transitions && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-4 pl-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2\",\n                children: [/*#__PURE__*/_jsxDEV(Label, {\n                  htmlFor: \"transition-type\",\n                  children: \"Transition Type\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1059,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  value: assemblyOptions.transition_type,\n                  onValueChange: value => setAssemblyOptions(prev => ({\n                    ...prev,\n                    transition_type: value\n                  })),\n                  children: [/*#__PURE__*/_jsxDEV(SelectTrigger, {\n                    id: \"transition-type\",\n                    children: /*#__PURE__*/_jsxDEV(SelectValue, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1067,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1066,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(SelectContent, {\n                    children: [/*#__PURE__*/_jsxDEV(SelectItem, {\n                      value: \"fade\",\n                      children: \"Fade\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1070,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n                      value: \"wipe\",\n                      children: \"Wipe\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1071,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n                      value: \"dissolve\",\n                      children: \"Dissolve\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1072,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n                      value: \"slidedown\",\n                      children: \"Slide Down\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1073,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n                      value: \"slideup\",\n                      children: \"Slide Up\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1074,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1069,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1060,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1058,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2\",\n                children: [/*#__PURE__*/_jsxDEV(Label, {\n                  htmlFor: \"transition-duration\",\n                  children: \"Duration (seconds)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1080,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"transition-duration\",\n                  type: \"number\",\n                  min: \"0.1\",\n                  max: \"2\",\n                  step: \"0.1\",\n                  value: assemblyOptions.transition_duration,\n                  onChange: e => setAssemblyOptions(prev => ({\n                    ...prev,\n                    transition_duration: parseFloat(e.target.value)\n                  })),\n                  className: \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1081,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1079,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1057,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1041,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-t pt-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1101,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(Label, {\n                  htmlFor: \"subtitles\",\n                  className: \"text-base font-semibold\",\n                  children: \"Add Subtitles\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1107,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-muted-foreground\",\n                  children: \"Auto-generated from shot scripts\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1108,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1106,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Switch, {\n                id: \"subtitles\",\n                checked: assemblyOptions.add_subtitles,\n                onCheckedChange: checked => setAssemblyOptions(prev => ({\n                  ...prev,\n                  add_subtitles: checked\n                }))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1110,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1105,\n              columnNumber: 15\n            }, this), assemblyOptions.add_subtitles && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-4 pl-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2\",\n                children: [/*#__PURE__*/_jsxDEV(Label, {\n                  htmlFor: \"subtitle-position\",\n                  children: \"Position\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1122,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  value: assemblyOptions.subtitle_position,\n                  onValueChange: value => setAssemblyOptions(prev => ({\n                    ...prev,\n                    subtitle_position: value\n                  })),\n                  children: [/*#__PURE__*/_jsxDEV(SelectTrigger, {\n                    id: \"subtitle-position\",\n                    children: /*#__PURE__*/_jsxDEV(SelectValue, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1130,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1129,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(SelectContent, {\n                    children: [/*#__PURE__*/_jsxDEV(SelectItem, {\n                      value: \"top\",\n                      children: \"Top\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1133,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n                      value: \"center\",\n                      children: \"Center\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1134,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n                      value: \"bottom\",\n                      children: \"Bottom\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1135,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1132,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1123,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1121,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2\",\n                children: [/*#__PURE__*/_jsxDEV(Label, {\n                  htmlFor: \"subtitle-size\",\n                  children: \"Font Size\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1141,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"subtitle-size\",\n                  type: \"number\",\n                  min: \"24\",\n                  max: \"72\",\n                  step: \"4\",\n                  value: assemblyOptions.subtitle_font_size,\n                  onChange: e => setAssemblyOptions(prev => ({\n                    ...prev,\n                    subtitle_font_size: parseInt(e.target.value)\n                  })),\n                  className: \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1142,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1140,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1120,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-t pt-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1162,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                htmlFor: \"platform\",\n                className: \"text-base font-semibold\",\n                children: \"Optimize for Platform\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1167,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-muted-foreground mb-3\",\n                children: \"Adjust resolution and format for best results\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1168,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1166,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              value: assemblyOptions.optimize_platform,\n              onValueChange: value => setAssemblyOptions(prev => ({\n                ...prev,\n                optimize_platform: value\n              })),\n              children: [/*#__PURE__*/_jsxDEV(SelectTrigger, {\n                id: \"platform\",\n                children: /*#__PURE__*/_jsxDEV(SelectValue, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1178,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1177,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(SelectContent, {\n                children: [/*#__PURE__*/_jsxDEV(SelectItem, {\n                  value: \"youtube\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center gap-2\",\n                    children: [/*#__PURE__*/_jsxDEV(Video, {\n                      className: \"w-4 h-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1183,\n                      columnNumber: 23\n                    }, this), \"YouTube (1920x1080, 16:9)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1182,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1181,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n                  value: \"tiktok\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center gap-2\",\n                    children: [/*#__PURE__*/_jsxDEV(Film, {\n                      className: \"w-4 h-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1189,\n                      columnNumber: 23\n                    }, this), \"TikTok (1080x1920, 9:16)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1188,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1187,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n                  value: \"instagram\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center gap-2\",\n                    children: [/*#__PURE__*/_jsxDEV(Film, {\n                      className: \"w-4 h-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1195,\n                      columnNumber: 23\n                    }, this), \"Instagram Reels (1080x1920, 9:16)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1194,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1193,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1180,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1171,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1165,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1038,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DialogFooter, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline\",\n            onClick: () => setShowAssemblyDialog(false),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1205,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => {\n              setShowAssemblyDialog(false);\n              handleStartAssembly();\n            },\n            className: \"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white\",\n            children: [/*#__PURE__*/_jsxDEV(Clapperboard, {\n              className: \"w-4 h-4 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1215,\n              columnNumber: 15\n            }, this), \"Start Assembly\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1208,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1204,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1027,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1026,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 651,\n    columnNumber: 5\n  }, this);\n};\n_s2(ContentStudio, \"bEbJLH71ne4UdWoMDuSD6bjOrro=\", false, function () {\n  return [useNavigate, useParams, useSensors, useSensor, useSensor];\n});\n_c2 = ContentStudio;\nvar _c, _c2;\n$RefreshReg$(_c, \"SortableShotCard\");\n$RefreshReg$(_c2, \"ContentStudio\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Button","Card","CardContent","Textarea","Badge","Avatar","AvatarFallback","Input","Sparkles","Upload","X","Send","Video","CheckCircle","XCircle","Film","Loader2","User","Clock","ChevronLeft","FolderOpen","Clapperboard","Download","Settings","Edit2","Trash2","Save","Plus","GripVertical","toast","useNavigate","useParams","UserMenu","sendDirectorMessage","getDirectorProject","uploadDirectorSegment","assembleProjectVideo","getAssemblyStatus","downloadAssembledVideo","updateShot","addShot","deleteShot","reorderShots","Dialog","DialogContent","DialogDescription","DialogFooter","DialogHeader","DialogTitle","Label","Switch","Select","SelectContent","SelectItem","SelectTrigger","SelectValue","Progress","DndContext","closestCenter","KeyboardSensor","PointerSensor","useSensor","useSensors","arrayMove","SortableContext","sortableKeyboardCoordinates","useSortable","verticalListSortingStrategy","CSS","jsxDEV","_jsxDEV","Fragment","_Fragment","SortableShotCard","shot","index","projectId","onUpdate","onDelete","uploadingSegment","handleSegmentUpload","handleFeedback","_s","isEditing","setIsEditing","editData","setEditData","segment_name","script","visual_guide","duration","attributes","listeners","setNodeRef","transform","transition","isDragging","id","style","Transform","toString","opacity","handleSave","result","success","shot_list","error","console","handleCancel","handleDeleteClick","log","confirmed","window","confirm","replace","message","ref","className","uploaded","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","type","parseInt","variant","onClick","size","stopPropagation","input","document","createElement","accept","onchange","file","files","click","disabled","_c","markdownToPlainText","text","trim","extractCleanUserGoal","userGoal","parts","split","ContentStudio","_s2","navigate","project","setProject","messages","setMessages","inputValue","setInputValue","isProcessing","setIsProcessing","shotList","setShotList","matchedFormat","setMatchedFormat","setUploadingSegment","showAddShot","setShowAddShot","newShotData","setNewShotData","showAssemblyDialog","setShowAssemblyDialog","isAssembling","setIsAssembling","assemblyId","setAssemblyId","assemblyProgress","setAssemblyProgress","assemblyStatus","setAssemblyStatus","assemblyOptions","setAssemblyOptions","add_transitions","transition_type","transition_duration","add_subtitles","subtitle_position","subtitle_font_size","optimize_platform","textareaRef","messagesEndRef","fileInputRef","sensors","coordinateGetter","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","loadProject","projectData","matched_format","shotCount","length","formatName","name","platform","target_platform","summary","role","content","timestamp","Date","handleSendMessage","userMessage","prev","aiMessage","handleKeyDown","key","metaKey","ctrlKey","segment","startsWith","map","s","allSegmentsUploaded","every","handleStartAssembly","assembly_id","pollAssemblyStatus","checkStatus","status","progress","setTimeout","handleDownloadVideo","handleDragEnd","event","active","over","oldIndex","findIndex","idx","newIndex","newShotList","handleAddShot","segmentName","msg","user_goal","description","filter","placeholder","collisionDetection","onDragEnd","items","strategy","toLocaleTimeString","hour","minute","animationDelay","_textareaRef$current","focus","_textareaRef$current2","some","_textareaRef$current3","onKeyDown","open","onOpenChange","htmlFor","checked","onCheckedChange","onValueChange","min","max","step","parseFloat","_c2","$RefreshReg$"],"sources":["/app/frontend/src/components/ContentStudio.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { Button } from './ui/button';\nimport { Card, CardContent } from './ui/card';\nimport { Textarea } from './ui/textarea';\nimport { Badge } from './ui/badge';\nimport { Avatar, AvatarFallback } from './ui/avatar';\nimport { Input } from './ui/input';\nimport { \n  Sparkles, Upload, X, Send, Video, CheckCircle, XCircle, \n  Film, Loader2, User, Clock, ChevronLeft, FolderOpen, Clapperboard,\n  Download, Settings, Edit2, Trash2, Save, Plus, GripVertical\n} from 'lucide-react';\nimport { toast } from 'sonner';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { UserMenu } from './UserMenu';\nimport {\n  sendDirectorMessage,\n  getDirectorProject,\n  uploadDirectorSegment,\n  assembleProjectVideo,\n  getAssemblyStatus,\n  downloadAssembledVideo,\n  updateShot,\n  addShot,\n  deleteShot,\n  reorderShots\n} from '../utils/api';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"./ui/dialog\";\nimport { Label } from \"./ui/label\";\nimport { Switch } from \"./ui/switch\";\nimport { \n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"./ui/select\";\nimport { Progress } from \"./ui/progress\";\nimport {\n  DndContext,\n  closestCenter,\n  KeyboardSensor,\n  PointerSensor,\n  useSensor,\n  useSensors,\n} from '@dnd-kit/core';\nimport {\n  arrayMove,\n  SortableContext,\n  sortableKeyboardCoordinates,\n  useSortable,\n  verticalListSortingStrategy,\n} from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\n\n// Sortable Shot Card Component\nconst SortableShotCard = ({ shot, index, projectId, onUpdate, onDelete, uploadingSegment, handleSegmentUpload, handleFeedback }) => {\n  const [isEditing, setIsEditing] = useState(false);\n  const [editData, setEditData] = useState({\n    segment_name: shot.segment_name,\n    script: shot.script,\n    visual_guide: shot.visual_guide,\n    duration: shot.duration\n  });\n\n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    transform,\n    transition,\n    isDragging,\n  } = useSortable({ id: shot.segment_name + index });\n\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n    opacity: isDragging ? 0.5 : 1,\n  };\n\n  const handleSave = async () => {\n    try {\n      const result = await updateShot(projectId, index, editData);\n      if (result.success) {\n        onUpdate(result.shot_list);\n        setIsEditing(false);\n        toast.success('Shot updated successfully!');\n      }\n    } catch (error) {\n      console.error('Error updating shot:', error);\n      toast.error('Failed to update shot');\n    }\n  };\n\n  const handleCancel = () => {\n    setEditData({\n      segment_name: shot.segment_name,\n      script: shot.script,\n      visual_guide: shot.visual_guide,\n      duration: shot.duration\n    });\n    setIsEditing(false);\n  };\n\n  const handleDeleteClick = async () => {\n    console.log('Delete button clicked for shot:', shot.segment_name, 'index:', index);\n    \n    const confirmed = window.confirm(`Are you sure you want to delete \"${shot.segment_name.replace('_', ' ')}\"?`);\n    console.log('User confirmation:', confirmed);\n    \n    if (confirmed) {\n      try {\n        console.log('Calling deleteShot API with projectId:', projectId, 'index:', index);\n        const result = await deleteShot(projectId, index);\n        console.log('Delete API response:', result);\n        \n        if (result.success) {\n          onDelete(result.shot_list);\n          toast.success('Shot deleted successfully!');\n        } else {\n          toast.error('Failed to delete shot');\n        }\n      } catch (error) {\n        console.error('Error deleting shot:', error);\n        toast.error(`Failed to delete shot: ${error.message}`);\n      }\n    }\n  };\n\n  return (\n    <Card \n      ref={setNodeRef}\n      style={style}\n      className={`transition-all ${\n        shot.uploaded \n          ? 'bg-green-50 border-green-200 dark:bg-green-950/20 dark:border-green-800' \n          : 'bg-card border-border hover:border-primary/50'\n      }`}\n    >\n      <CardContent className=\"pt-4 pb-4\">\n        <div className=\"space-y-3\">\n          <div className=\"flex items-start justify-between gap-2\">\n            <div className=\"flex items-center gap-2 flex-1\">\n              <div {...attributes} {...listeners} className=\"cursor-grab active:cursor-grabbing\">\n                <GripVertical className=\"w-4 h-4 text-muted-foreground\" />\n              </div>\n              {shot.uploaded ? (\n                <CheckCircle className=\"w-5 h-5 text-green-600 flex-shrink-0\" />\n              ) : (\n                <Clock className=\"w-5 h-5 text-muted-foreground flex-shrink-0\" />\n              )}\n              <div className=\"flex-1\">\n                {isEditing ? (\n                  <Input\n                    value={editData.segment_name}\n                    onChange={(e) => setEditData({...editData, segment_name: e.target.value})}\n                    className=\"text-sm font-semibold mb-2\"\n                  />\n                ) : (\n                  <h4 className=\"font-semibold text-sm text-foreground capitalize\">\n                    {shot.segment_name.replace('_', ' ')}\n                  </h4>\n                )}\n                <div className=\"flex items-center gap-2 mt-1 flex-wrap\">\n                  {isEditing ? (\n                    <Input\n                      type=\"number\"\n                      value={editData.duration}\n                      onChange={(e) => setEditData({...editData, duration: parseInt(e.target.value)})}\n                      className=\"w-16 h-6 text-xs\"\n                    />\n                  ) : (\n                    <Badge variant=\"outline\" className=\"text-xs\">\n                      {shot.duration}s\n                    </Badge>\n                  )}\n                  {shot.uploaded && !isEditing && (\n                    <button\n                      onClick={() => handleFeedback(shot.segment_name)}\n                      className=\"text-xs text-primary hover:underline font-semibold\"\n                    >\n                      Get Feedback\n                    </button>\n                  )}\n                </div>\n              </div>\n            </div>\n            <div className=\"flex gap-1\">\n              {isEditing ? (\n                <>\n                  <Button\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    onClick={handleSave}\n                    className=\"h-8 w-8 p-0\"\n                  >\n                    <Save className=\"w-4 h-4 text-green-600\" />\n                  </Button>\n                  <Button\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    onClick={handleCancel}\n                    className=\"h-8 w-8 p-0\"\n                  >\n                    <X className=\"w-4 h-4 text-red-600\" />\n                  </Button>\n                </>\n              ) : (\n                <>\n                  <Button\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    onClick={() => setIsEditing(true)}\n                    className=\"h-8 w-8 p-0\"\n                  >\n                    <Edit2 className=\"w-4 h-4\" />\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleDeleteClick();\n                    }}\n                    className=\"h-8 w-8 p-0\"\n                  >\n                    <Trash2 className=\"w-4 h-4 text-red-600\" />\n                  </Button>\n                </>\n              )}\n            </div>\n          </div>\n          \n          <div className=\"space-y-2 text-xs\">\n            <div>\n              <strong className=\"text-foreground\">Script:</strong>\n              {isEditing ? (\n                <Textarea\n                  value={editData.script}\n                  onChange={(e) => setEditData({...editData, script: e.target.value})}\n                  className=\"mt-1 text-xs min-h-[60px]\"\n                />\n              ) : (\n                <p className=\"text-muted-foreground mt-1\">{shot.script}</p>\n              )}\n            </div>\n            <div>\n              <strong className=\"text-foreground\">Visual Guide:</strong>\n              {isEditing ? (\n                <Textarea\n                  value={editData.visual_guide}\n                  onChange={(e) => setEditData({...editData, visual_guide: e.target.value})}\n                  className=\"mt-1 text-xs min-h-[60px]\"\n                />\n              ) : (\n                <p className=\"text-muted-foreground mt-1\">{shot.visual_guide}</p>\n              )}\n            </div>\n          </div>\n\n          {!shot.uploaded && !isEditing && (\n            <Button\n              size=\"sm\"\n              onClick={() => {\n                const input = document.createElement('input');\n                input.type = 'file';\n                input.accept = 'video/*';\n                input.onchange = (e) => {\n                  const file = e.target.files[0];\n                  if (file) handleSegmentUpload(shot, file);\n                };\n                input.click();\n              }}\n              disabled={uploadingSegment === shot.segment_name}\n              className=\"w-full\"\n              variant=\"outline\"\n            >\n              {uploadingSegment === shot.segment_name ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                  Uploading...\n                </>\n              ) : (\n                <>\n                  <Upload className=\"w-4 h-4 mr-2\" />\n                  Upload Footage\n                </>\n              )}\n            </Button>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n\n// Function to convert markdown to plain text\nconst markdownToPlainText = (text) => {\n  if (!text) return '';\n  \n  return text\n    // Remove headers (###, ##, #)\n    .replace(/^#{1,6}\\s+/gm, '')\n    // Remove bold (**text** or __text__)\n    .replace(/(\\*\\*|__)(.*?)\\1/g, '$2')\n    // Remove italic (*text* or _text_)\n    .replace(/(\\*|_)(.*?)\\1/g, '$2')\n    // Remove strikethrough (~~text~~)\n    .replace(/~~(.*?)~~/g, '$1')\n    // Remove inline code (`code`)\n    .replace(/`([^`]+)`/g, '$1')\n    // Remove code blocks (```code```)\n    .replace(/```[\\s\\S]*?```/g, '')\n    // Remove links [text](url)\n    .replace(/\\[([^\\]]+)\\]\\([^)]+\\)/g, '$1')\n    // Remove images ![alt](url)\n    .replace(/!\\[([^\\]]*)\\]\\([^)]+\\)/g, '$1')\n    // Remove horizontal rules (---, ___, ***)\n    .replace(/^[\\*\\-_]{3,}\\s*$/gm, '')\n    // Remove blockquotes (>)\n    .replace(/^>\\s+/gm, '')\n    // Remove list markers (-, *, +, 1.)\n    .replace(/^\\s*[-\\*\\+]\\s+/gm, 'â€¢ ')\n    .replace(/^\\s*\\d+\\.\\s+/gm, '')\n    // Remove extra whitespace\n    .replace(/\\n{3,}/g, '\\n\\n')\n    .trim();\n};\n\n// Function to extract clean user goal without research context\nconst extractCleanUserGoal = (userGoal) => {\n  if (!userGoal) return '';\n  \n  // Split by research context marker and return only the first part\n  const parts = userGoal.split(/\\[Research Context for AI Director\\]:/i);\n  return parts[0].trim();\n};\n\nexport const ContentStudio = () => {\n  const navigate = useNavigate();\n  const { projectId } = useParams();\n  \n  const [project, setProject] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [inputValue, setInputValue] = useState('');\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [shotList, setShotList] = useState([]);\n  const [matchedFormat, setMatchedFormat] = useState(null);\n  const [uploadingSegment, setUploadingSegment] = useState(null);\n  const [showAddShot, setShowAddShot] = useState(false);\n  const [newShotData, setNewShotData] = useState({\n    segment_name: '',\n    script: '',\n    visual_guide: '',\n    duration: 15\n  });\n  \n  // Assembly state\n  const [showAssemblyDialog, setShowAssemblyDialog] = useState(false);\n  const [isAssembling, setIsAssembling] = useState(false);\n  const [assemblyId, setAssemblyId] = useState(null);\n  const [assemblyProgress, setAssemblyProgress] = useState(0);\n  const [assemblyStatus, setAssemblyStatus] = useState(null);\n  const [assemblyOptions, setAssemblyOptions] = useState({\n    add_transitions: true,\n    transition_type: 'fade',\n    transition_duration: 0.8,\n    add_subtitles: true,\n    subtitle_position: 'bottom',\n    subtitle_font_size: 48,\n    optimize_platform: 'youtube'\n  });\n  \n  const textareaRef = useRef(null);\n  const messagesEndRef = useRef(null);\n  const fileInputRef = useRef(null);\n  \n  // Drag and drop sensors\n  const sensors = useSensors(\n    useSensor(PointerSensor),\n    useSensor(KeyboardSensor, {\n      coordinateGetter: sortableKeyboardCoordinates,\n    })\n  );\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // Load project on mount\n  useEffect(() => {\n    loadProject();\n  }, [projectId]);\n\n  const loadProject = async () => {\n    try {\n      const projectData = await getDirectorProject(projectId);\n      setProject(projectData);\n      \n      if (projectData.shot_list) {\n        setShotList(projectData.shot_list);\n      }\n      if (projectData.matched_format) {\n        setMatchedFormat(projectData.matched_format);\n      }\n      \n      // Initialize messages with brief summary\n      const shotCount = projectData.shot_list ? projectData.shot_list.length : 0;\n      const formatName = projectData.matched_format ? projectData.matched_format.name : 'a viral format';\n      const platform = projectData.target_platform || 'your platform';\n      \n      const summary = `You're creating content for ${platform} using the \"${formatName}\" format with ${shotCount} shots to film.`;\n      \n      setMessages([{\n        role: 'assistant',\n        content: `I've created your shot list based on the best viral format for your content. ${summary} Ready to start recording?`,\n        timestamp: new Date()\n      }]);\n    } catch (error) {\n      console.error('Error loading project:', error);\n      toast.error('Failed to load project');\n    }\n  };\n\n  const handleSendMessage = async () => {\n    if (!inputValue.trim()) return;\n\n    setIsProcessing(true);\n    const userMessage = {\n      role: 'user',\n      content: inputValue.trim(),\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setInputValue('');\n\n    try {\n      const result = await sendDirectorMessage(projectId, userMessage.content);\n      \n      const aiMessage = {\n        role: 'assistant',\n        content: result.message,\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, aiMessage]);\n\n      // Update state from result\n      if (result.shot_list) {\n        setShotList(result.shot_list);\n      }\n      if (result.matched_format) {\n        setMatchedFormat(result.matched_format);\n      }\n\n    } catch (error) {\n      console.error('Director error:', error);\n      toast.error('Failed to send message');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter' && (e.metaKey || e.ctrlKey)) {\n      handleSendMessage();\n    }\n  };\n\n  const handleSegmentUpload = async (segment, file) => {\n    if (!file.type.startsWith('video/')) {\n      toast.error('Please upload a video file');\n      return;\n    }\n\n    setUploadingSegment(segment.segment_name);\n    try {\n      await uploadDirectorSegment(projectId, segment.segment_name, file);\n      \n      toast.success(`${segment.segment_name} uploaded successfully!`);\n      \n      // Update shot list\n      setShotList(prev => prev.map(s => \n        s.segment_name === segment.segment_name \n          ? { ...s, uploaded: true }\n          : s\n      ));\n      \n      // Reload project to get latest state\n      await loadProject();\n      \n    } catch (error) {\n      console.error('Upload error:', error);\n      toast.error('Failed to upload segment');\n    } finally {\n      setUploadingSegment(null);\n    }\n  };\n\n  const allSegmentsUploaded = () => {\n    return shotList.length > 0 && shotList.every(shot => shot.uploaded);\n  };\n\n  const handleStartAssembly = async () => {\n    setIsAssembling(true);\n    setAssemblyProgress(0);\n    \n    try {\n      const result = await assembleProjectVideo(projectId, assemblyOptions);\n      \n      setAssemblyId(result.assembly_id);\n      setAssemblyStatus('processing');\n      toast.success('Video assembly started!');\n      \n      // Start polling for status\n      pollAssemblyStatus(result.assembly_id);\n      \n    } catch (error) {\n      console.error('Assembly error:', error);\n      toast.error('Failed to start video assembly');\n      setIsAssembling(false);\n    }\n  };\n\n  const pollAssemblyStatus = async (id) => {\n    const checkStatus = async () => {\n      try {\n        const status = await getAssemblyStatus(id);\n        \n        setAssemblyProgress(status.progress);\n        setAssemblyStatus(status.status);\n        \n        if (status.status === 'completed') {\n          setIsAssembling(false);\n          toast.success('Video assembly complete! Ready to download.');\n        } else if (status.status === 'failed') {\n          setIsAssembling(false);\n          toast.error(`Assembly failed: ${status.error || 'Unknown error'}`);\n        } else {\n          // Continue polling\n          setTimeout(() => checkStatus(), 2000);\n        }\n      } catch (error) {\n        console.error('Status check error:', error);\n        setIsAssembling(false);\n        toast.error('Failed to check assembly status');\n      }\n    };\n    \n    checkStatus();\n  };\n\n  const handleDownloadVideo = async () => {\n    try {\n      await downloadAssembledVideo(assemblyId);\n      toast.success('Video download started!');\n    } catch (error) {\n      console.error('Download error:', error);\n      toast.error('Failed to download video');\n    }\n  };\n\n  const handleDragEnd = async (event) => {\n    const { active, over } = event;\n\n    if (active.id !== over.id) {\n      const oldIndex = shotList.findIndex((shot, idx) => shot.segment_name + idx === active.id);\n      const newIndex = shotList.findIndex((shot, idx) => shot.segment_name + idx === over.id);\n\n      const newShotList = arrayMove(shotList, oldIndex, newIndex);\n      setShotList(newShotList);\n\n      try {\n        await reorderShots(projectId, newShotList);\n        toast.success('Shot list reordered!');\n      } catch (error) {\n        console.error('Error reordering shots:', error);\n        toast.error('Failed to reorder shots');\n        setShotList(shotList); // Revert on error\n      }\n    }\n  };\n\n  const handleAddShot = async () => {\n    if (!newShotData.segment_name.trim() || !newShotData.script.trim()) {\n      toast.error('Please fill in shot name and script');\n      return;\n    }\n\n    try {\n      const result = await addShot(projectId, newShotData);\n      if (result.success) {\n        setShotList(result.shot_list);\n        setShowAddShot(false);\n        setNewShotData({\n          segment_name: '',\n          script: '',\n          visual_guide: '',\n          duration: 15\n        });\n        toast.success('Shot added successfully!');\n      }\n    } catch (error) {\n      console.error('Error adding shot:', error);\n      toast.error('Failed to add shot');\n    }\n  };\n\n  const handleFeedback = async (segmentName) => {\n    const msg = `Can you give me feedback on the ${segmentName.replace('_', ' ')} shot?`;\n    setInputValue(msg);\n    \n    setIsProcessing(true);\n    const userMessage = {\n      role: 'user',\n      content: msg,\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setInputValue('');\n    \n    try {\n      const result = await sendDirectorMessage(projectId, msg);\n      const aiMessage = {\n        role: 'assistant',\n        content: result.message,\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, aiMessage]);\n      if (result.shot_list) setShotList(result.shot_list);\n    } catch (error) {\n      console.error('Error:', error);\n      toast.error('Failed to get feedback');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-sky\">\n      {/* Navigation */}\n      <nav className=\"border-b border-border/50 bg-background/80 backdrop-blur-md sticky top-0 z-50\">\n        <div className=\"max-w-full px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            <div className=\"flex items-center gap-4\">\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => navigate('/director')}\n                className=\"gap-2\"\n              >\n                <ChevronLeft className=\"w-4 h-4\" />\n                Back to Home\n              </Button>\n              <div className=\"h-6 w-px bg-border\"></div>\n              <Badge className=\"bg-primary/20 text-primary border-primary/30 font-sans animate-pulse\">\n                <Film className=\"w-3 h-3 mr-1\" />\n                Content Studio\n              </Badge>\n            </div>\n            <div className=\"flex items-center gap-4\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => navigate('/director/projects')}\n                className=\"gap-2\"\n              >\n                <FolderOpen className=\"w-4 h-4\" />\n                All Projects\n              </Button>\n              <UserMenu />\n            </div>\n          </div>\n        </div>\n      </nav>\n\n      {/* Split Screen Layout */}\n      <div className=\"flex h-[calc(100vh-4rem)]\">\n        \n        {/* Left Side - Shot List & Project Info */}\n        <div className=\"w-1/3 border-r border-border/50 bg-background/50 backdrop-blur-sm overflow-y-auto\">\n          <div className=\"p-6 space-y-6\">\n            \n            {/* Project Info */}\n            {project && (\n              <Card className=\"border-primary/30 bg-primary/5\">\n                <CardContent className=\"pt-4 pb-4\">\n                  <h3 className=\"text-sm font-semibold text-muted-foreground mb-2\">Project Goal</h3>\n                  <p className=\"text-sm text-foreground\">{extractCleanUserGoal(project.user_goal)}</p>\n                </CardContent>\n              </Card>\n            )}\n\n            {/* Matched Format */}\n            {matchedFormat && (\n              <Card className=\"border-accent/30 bg-accent/5\">\n                <CardContent className=\"pt-4 pb-4\">\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <Sparkles className=\"w-4 h-4 text-accent-foreground\" />\n                    <h3 className=\"text-sm font-semibold text-foreground\">Matched Format</h3>\n                  </div>\n                  <p className=\"text-sm font-semibold text-foreground mb-1\">{matchedFormat.name}</p>\n                  <p className=\"text-xs text-muted-foreground\">{matchedFormat.description}</p>\n                </CardContent>\n              </Card>\n            )}\n\n            {/* Shot List */}\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-lg font-semibold text-foreground\">Shot List</h3>\n                <div className=\"flex items-center gap-2\">\n                  <Badge variant=\"outline\" className=\"text-xs\">\n                    {shotList.filter(s => s.uploaded).length} / {shotList.length}\n                  </Badge>\n                  <Button\n                    size=\"sm\"\n                    onClick={() => setShowAddShot(true)}\n                    className=\"gap-1 h-7\"\n                  >\n                    <Plus className=\"w-4 h-4\" />\n                    Add Shot\n                  </Button>\n                </div>\n                \n                {/* Generate Final Video Button */}\n                {allSegmentsUploaded() && (\n                  <Card className=\"border-green-200 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 dark:border-green-800\">\n                    <CardContent className=\"pt-6 pb-6\">\n                      <div className=\"space-y-4\">\n                        <div className=\"flex items-center gap-3\">\n                          <div className=\"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center\">\n                            <CheckCircle className=\"w-6 h-6 text-white\" />\n                          </div>\n                          <div>\n                            <h3 className=\"font-semibold text-foreground\">All Shots Complete!</h3>\n                            <p className=\"text-xs text-muted-foreground\">Ready to assemble your final video</p>\n                          </div>\n                        </div>\n                        \n                        {!isAssembling && !assemblyId && (\n                          <Button \n                            onClick={() => setShowAssemblyDialog(true)}\n                            className=\"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-semibold\"\n                            size=\"lg\"\n                          >\n                            <Clapperboard className=\"w-5 h-5 mr-2\" />\n                            Generate Final Video\n                          </Button>\n                        )}\n                        \n                        {isAssembling && (\n                          <div className=\"space-y-3\">\n                            <div className=\"flex items-center justify-between text-sm\">\n                              <span className=\"text-muted-foreground\">Assembling video...</span>\n                              <span className=\"font-semibold text-foreground\">{assemblyProgress}%</span>\n                            </div>\n                            <Progress value={assemblyProgress} className=\"h-2\" />\n                            <p className=\"text-xs text-muted-foreground\">\n                              {assemblyProgress < 30 && \"Processing segments...\"}\n                              {assemblyProgress >= 30 && assemblyProgress < 60 && \"Adding transitions...\"}\n                              {assemblyProgress >= 60 && assemblyProgress < 90 && \"Optimizing video...\"}\n                              {assemblyProgress >= 90 && \"Finalizing...\"}\n                            </p>\n                          </div>\n                        )}\n                        \n                        {assemblyStatus === 'completed' && assemblyId && (\n                          <Button \n                            onClick={handleDownloadVideo}\n                            className=\"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold\"\n                            size=\"lg\"\n                          >\n                            <Download className=\"w-5 h-5 mr-2\" />\n                            Download Final Video\n                          </Button>\n                        )}\n                      </div>\n                    </CardContent>\n                  </Card>\n                )}\n              </div>\n\n              {/* Add Shot Form */}\n              {showAddShot && (\n                <Card className=\"border-primary/30 bg-primary/5\">\n                  <CardContent className=\"pt-4 pb-4 space-y-3\">\n                    <h4 className=\"font-semibold text-sm\">Add New Shot</h4>\n                    <div className=\"space-y-2\">\n                      <Input\n                        placeholder=\"Shot name (e.g., hook, demo)\"\n                        value={newShotData.segment_name}\n                        onChange={(e) => setNewShotData({...newShotData, segment_name: e.target.value})}\n                        className=\"text-sm\"\n                      />\n                      <Textarea\n                        placeholder=\"Script for this shot\"\n                        value={newShotData.script}\n                        onChange={(e) => setNewShotData({...newShotData, script: e.target.value})}\n                        className=\"text-sm min-h-[60px]\"\n                      />\n                      <Textarea\n                        placeholder=\"Visual guide (how to film)\"\n                        value={newShotData.visual_guide}\n                        onChange={(e) => setNewShotData({...newShotData, visual_guide: e.target.value})}\n                        className=\"text-sm min-h-[60px]\"\n                      />\n                      <div className=\"flex items-center gap-2\">\n                        <label className=\"text-xs text-muted-foreground\">Duration (seconds):</label>\n                        <Input\n                          type=\"number\"\n                          value={newShotData.duration}\n                          onChange={(e) => setNewShotData({...newShotData, duration: parseInt(e.target.value)})}\n                          className=\"w-20 h-8 text-sm\"\n                        />\n                      </div>\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <Button size=\"sm\" onClick={handleAddShot} className=\"flex-1\">\n                        <Plus className=\"w-4 h-4 mr-1\" />\n                        Add Shot\n                      </Button>\n                      <Button \n                        size=\"sm\" \n                        variant=\"outline\" \n                        onClick={() => {\n                          setShowAddShot(false);\n                          setNewShotData({\n                            segment_name: '',\n                            script: '',\n                            visual_guide: '',\n                            duration: 15\n                          });\n                        }}\n                        className=\"flex-1\"\n                      >\n                        Cancel\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              )}\n              \n              {/* Sortable Shot List */}\n              {shotList.length > 0 && (\n                <DndContext\n                  sensors={sensors}\n                  collisionDetection={closestCenter}\n                  onDragEnd={handleDragEnd}\n                >\n                  <SortableContext\n                    items={shotList.map((shot, idx) => shot.segment_name + idx)}\n                    strategy={verticalListSortingStrategy}\n                  >\n                    <div className=\"space-y-3\">\n                      {shotList.map((shot, index) => (\n                        <SortableShotCard\n                          key={shot.segment_name + index}\n                          shot={shot}\n                          index={index}\n                          projectId={projectId}\n                          onUpdate={setShotList}\n                          onDelete={setShotList}\n                          uploadingSegment={uploadingSegment}\n                          handleSegmentUpload={handleSegmentUpload}\n                          handleFeedback={handleFeedback}\n                        />\n                      ))}\n                    </div>\n                  </SortableContext>\n                </DndContext>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Right Side - Chat */}\n        <div className=\"flex-1 flex flex-col\">\n          {/* Chat Messages */}\n          <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\n            {messages.map((message, index) => (\n              <div key={index} className={`flex gap-3 ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}>\n                {message.role === 'assistant' && (\n                  <Avatar className=\"w-10 h-10 border-2 border-primary/20 flex-shrink-0\">\n                    <AvatarFallback className=\"bg-gradient-primary text-primary-foreground\">\n                      <Sparkles className=\"w-5 h-5\" />\n                    </AvatarFallback>\n                  </Avatar>\n                )}\n                \n                <div className={`flex-1 max-w-2xl ${message.role === 'user' ? 'flex flex-col items-end' : ''}`}>\n                  <Card className={`${\n                    message.role === 'user' \n                      ? 'bg-primary text-primary-foreground border-primary' \n                      : 'bg-card/95 backdrop-blur-sm border-border/50'\n                  } shadow-lg`}>\n                    <CardContent className=\"pt-4 pb-4\">\n                      <div className=\"text-sm leading-relaxed whitespace-pre-wrap font-sans\">\n                        {message.role === 'assistant' ? markdownToPlainText(message.content) : message.content}\n                      </div>\n                    </CardContent>\n                  </Card>\n                  <span className=\"text-xs text-muted-foreground mt-1.5 font-sans\">\n                    {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                  </span>\n                </div>\n\n                {message.role === 'user' && (\n                  <Avatar className=\"w-10 h-10 border-2 border-primary/20 flex-shrink-0\">\n                    <AvatarFallback className=\"bg-muted text-muted-foreground\">\n                      <User className=\"w-5 h-5\" />\n                    </AvatarFallback>\n                  </Avatar>\n                )}\n              </div>\n            ))}\n\n            {isProcessing && (\n              <div className=\"flex gap-3 justify-start\">\n                <Avatar className=\"w-10 h-10 border-2 border-primary/20\">\n                  <AvatarFallback className=\"bg-gradient-primary text-primary-foreground\">\n                    <Sparkles className=\"w-5 h-5\" />\n                  </AvatarFallback>\n                </Avatar>\n                <Card className=\"bg-card/95 backdrop-blur-sm border-border/50 shadow-lg\">\n                  <CardContent className=\"pt-4 pb-4\">\n                    <div className=\"flex items-center gap-2\">\n                      <div className=\"flex gap-1\">\n                        <div className=\"w-2 h-2 rounded-full bg-primary animate-bounce\" style={{ animationDelay: '0s' }}></div>\n                        <div className=\"w-2 h-2 rounded-full bg-primary animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\n                        <div className=\"w-2 h-2 rounded-full bg-primary animate-bounce\" style={{ animationDelay: '0.4s' }}></div>\n                      </div>\n                      <span className=\"text-sm text-muted-foreground font-sans\">Thinking...</span>\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n            )}\n            <div ref={messagesEndRef} />\n          </div>\n\n          {/* Input Area */}\n          <div className=\"border-t border-border/50 bg-background/80 backdrop-blur-sm p-6\">\n            {/* Quick Actions */}\n            {shotList.length > 0 && (\n              <div className=\"flex flex-wrap gap-2 mb-4\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => {\n                    setInputValue(\"Please provide a comprehensive project status. Include: 1) Overall creative vision and format we're using, 2) Complete shot list with what's been filmed and what's remaining, 3) Quality assessment of uploaded shots so far, 4) Any creative adjustments or suggestions based on progress, 5) Estimated completion percentage and next steps.\");\n                    textareaRef.current?.focus();\n                  }}\n                  className=\"text-xs\"\n                >\n                  ðŸ“Š Project Status\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => {\n                    setInputValue(\"Please explain the next shot I need to record. Include: 1) Which shot it is in the sequence, 2) What the script and visual guide are for this shot, 3) Any specific tips or techniques for filming this shot effectively, 4) How this shot fits into the overall narrative. Do I have any questions before I start filming?\");\n                    textareaRef.current?.focus();\n                  }}\n                  className=\"text-xs\"\n                >\n                  ðŸŽ¥ Next Shot\n                </Button>\n                {shotList.some(s => s.uploaded) && (\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => {\n                      setInputValue(\"Can you review all my uploaded shots?\");\n                      textareaRef.current?.focus();\n                    }}\n                    className=\"text-xs\"\n                  >\n                    âœ¨ Review Uploads\n                  </Button>\n                )}\n              </div>\n            )}\n            \n            <Card className=\"border-border/50 shadow-xl bg-card/95 backdrop-blur-sm\">\n              <CardContent className=\"pt-4 pb-4\">\n                <div className=\"flex gap-2\">\n                  <Textarea\n                    ref={textareaRef}\n                    value={inputValue}\n                    onChange={(e) => setInputValue(e.target.value)}\n                    onKeyDown={handleKeyDown}\n                    placeholder=\"Ask me anything about your video or tell me you're ready to record...\"\n                    className=\"min-h-[80px] resize-none focus:ring-primary font-sans text-base\"\n                    disabled={isProcessing}\n                  />\n                  <Button\n                    onClick={handleSendMessage}\n                    disabled={isProcessing || !inputValue.trim()}\n                    className=\"bg-gradient-primary hover:shadow-glow self-end px-5 h-[80px] transition-all duration-300\"\n                  >\n                    <Send className=\"w-5 h-5\" />\n                  </Button>\n                </div>\n                <p className=\"text-xs text-muted-foreground mt-2 font-sans\">\n                  Press <kbd className=\"px-2 py-1 bg-muted rounded text-xs\">âŒ˜ Enter</kbd> to send\n                </p>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n\n      {/* Assembly Configuration Dialog */}\n      <Dialog open={showAssemblyDialog} onOpenChange={setShowAssemblyDialog}>\n        <DialogContent className=\"sm:max-w-[600px]\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <Settings className=\"w-5 h-5\" />\n              Configure Video Assembly\n            </DialogTitle>\n            <DialogDescription>\n              Customize how your final video will be assembled. Add transitions, subtitles, and optimize for your target platform.\n            </DialogDescription>\n          </DialogHeader>\n          \n          <div className=\"space-y-6 py-4\">\n            \n            {/* Transitions */}\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <Label htmlFor=\"transitions\" className=\"text-base font-semibold\">Add Transitions</Label>\n                  <p className=\"text-sm text-muted-foreground\">Smooth transitions between shots</p>\n                </div>\n                <Switch\n                  id=\"transitions\"\n                  checked={assemblyOptions.add_transitions}\n                  onCheckedChange={(checked) => \n                    setAssemblyOptions(prev => ({ ...prev, add_transitions: checked }))\n                  }\n                />\n              </div>\n              \n              {assemblyOptions.add_transitions && (\n                <div className=\"grid grid-cols-2 gap-4 pl-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"transition-type\">Transition Type</Label>\n                    <Select\n                      value={assemblyOptions.transition_type}\n                      onValueChange={(value) => \n                        setAssemblyOptions(prev => ({ ...prev, transition_type: value }))\n                      }\n                    >\n                      <SelectTrigger id=\"transition-type\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"fade\">Fade</SelectItem>\n                        <SelectItem value=\"wipe\">Wipe</SelectItem>\n                        <SelectItem value=\"dissolve\">Dissolve</SelectItem>\n                        <SelectItem value=\"slidedown\">Slide Down</SelectItem>\n                        <SelectItem value=\"slideup\">Slide Up</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"transition-duration\">Duration (seconds)</Label>\n                    <input\n                      id=\"transition-duration\"\n                      type=\"number\"\n                      min=\"0.1\"\n                      max=\"2\"\n                      step=\"0.1\"\n                      value={assemblyOptions.transition_duration}\n                      onChange={(e) => \n                        setAssemblyOptions(prev => ({ \n                          ...prev, \n                          transition_duration: parseFloat(e.target.value) \n                        }))\n                      }\n                      className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n\n            <div className=\"border-t pt-4\" />\n            \n            {/* Subtitles */}\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <Label htmlFor=\"subtitles\" className=\"text-base font-semibold\">Add Subtitles</Label>\n                  <p className=\"text-sm text-muted-foreground\">Auto-generated from shot scripts</p>\n                </div>\n                <Switch\n                  id=\"subtitles\"\n                  checked={assemblyOptions.add_subtitles}\n                  onCheckedChange={(checked) => \n                    setAssemblyOptions(prev => ({ ...prev, add_subtitles: checked }))\n                  }\n                />\n              </div>\n              \n              {assemblyOptions.add_subtitles && (\n                <div className=\"grid grid-cols-2 gap-4 pl-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"subtitle-position\">Position</Label>\n                    <Select\n                      value={assemblyOptions.subtitle_position}\n                      onValueChange={(value) => \n                        setAssemblyOptions(prev => ({ ...prev, subtitle_position: value }))\n                      }\n                    >\n                      <SelectTrigger id=\"subtitle-position\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"top\">Top</SelectItem>\n                        <SelectItem value=\"center\">Center</SelectItem>\n                        <SelectItem value=\"bottom\">Bottom</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"subtitle-size\">Font Size</Label>\n                    <input\n                      id=\"subtitle-size\"\n                      type=\"number\"\n                      min=\"24\"\n                      max=\"72\"\n                      step=\"4\"\n                      value={assemblyOptions.subtitle_font_size}\n                      onChange={(e) => \n                        setAssemblyOptions(prev => ({ \n                          ...prev, \n                          subtitle_font_size: parseInt(e.target.value) \n                        }))\n                      }\n                      className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n\n            <div className=\"border-t pt-4\" />\n            \n            {/* Platform Optimization */}\n            <div className=\"space-y-3\">\n              <div>\n                <Label htmlFor=\"platform\" className=\"text-base font-semibold\">Optimize for Platform</Label>\n                <p className=\"text-sm text-muted-foreground mb-3\">Adjust resolution and format for best results</p>\n              </div>\n              \n              <Select\n                value={assemblyOptions.optimize_platform}\n                onValueChange={(value) => \n                  setAssemblyOptions(prev => ({ ...prev, optimize_platform: value }))\n                }\n              >\n                <SelectTrigger id=\"platform\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"youtube\">\n                    <div className=\"flex items-center gap-2\">\n                      <Video className=\"w-4 h-4\" />\n                      YouTube (1920x1080, 16:9)\n                    </div>\n                  </SelectItem>\n                  <SelectItem value=\"tiktok\">\n                    <div className=\"flex items-center gap-2\">\n                      <Film className=\"w-4 h-4\" />\n                      TikTok (1080x1920, 9:16)\n                    </div>\n                  </SelectItem>\n                  <SelectItem value=\"instagram\">\n                    <div className=\"flex items-center gap-2\">\n                      <Film className=\"w-4 h-4\" />\n                      Instagram Reels (1080x1920, 9:16)\n                    </div>\n                  </SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowAssemblyDialog(false)}>\n              Cancel\n            </Button>\n            <Button \n              onClick={() => {\n                setShowAssemblyDialog(false);\n                handleStartAssembly();\n              }}\n              className=\"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white\"\n            >\n              <Clapperboard className=\"w-4 h-4 mr-2\" />\n              Start Assembly\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}